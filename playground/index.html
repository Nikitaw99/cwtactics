<!DOCTYPE html>
<html lang=en>
  
  <head>
    <meta charset=utf-8>
    <title>Sample HTML5 index.html from MyThinkPond</title>
    
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, , maximum-scale=1, user-scalable=no" />
    
    
  </head>
  
  <body>
    
  </body>
  
  <script>
(function( exports ){

  var modules = {};
  var inLoad = {};
  
  function require( mod ){
    var dep;
    
    dep = inLoad[mod];
    if( dep ){
      console.log("initialising module "+mod);
      
      delete inLoad[mod];
      if( typeof dep === "function" ){
        dep = dep( require );
      }
      modules[mod] = dep;
      
      console.log(mod+" module initialised");
    }
    
    return modules[mod];
  }
  
  exports.define = function( id, impl ){
    console.log("registered module "+id);
    
    if( inLoad[id] ) throw Error("duplicate id "+id);
    
    inLoad[id] = impl;
  };
  
  exports.require = require;

})( window );
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    define("util.list",function( require ){
  var error = require("util.log").error;
  
  var fillList = function(){
    var defValue = this.__defValue__;
    var len = this.__length__;
    var isFN = typeof defValue === 'function';
    
    // SIMPLE ARRAY OBJECT
    for(var i = 0, e = len; i < e; i++){
      if( isFN ) this[i] = defValue( i );
      else       this[i] = defValue;
    }
  };
  
  // ## List clone helper
  var cloneList = function( list ){
    var len = this.__length__;
    if( list.__length__ !== len ) util.error();
    for(var i = 0, e = len; i < e; i++){
      list[i] = this[i];
    }
    
    return list;
  };
    
  // ## List grab helper
  var grabList = function( list ){
    var len = this.__length__;
    if( list.__length__ !== len ) util.error();
    for(var i = 0, e = len; i < e; i++){
      this[i] = list[i];
    }
    
    return list;
  };
  
  /*
    ## list()
        
    Creates a list and fills it with default values.
   
    @param {Number} len the length of the created list
    @param defaultValue the default value that will be inserted into the list slots 
  */
  return function( len, defaultValue ){
    if( typeof defaultValue === "undefined" ) defaultValue = null;
    
    var warr = [];
    warr.__defValue__ = defaultValue;
    warr.__length__ = len;
    warr.resetValues = fillList;
    warr.cloneValues = cloneList;
    warr.grabValues  = grabList;
    
    warr.resetValues();
    
    return warr;
  };
  
});
    
    
    define("util.log",function( require ){
  
  var logfn = function( msg ){ 
    console.log(msg);   
  };
  
  var errorfn = function( msg ){
    console.error(msg); 
  };
  
  var arrayToMessage = function( args ){
    return ( args.length > 1 )? Array.prototype.join.call( args, " " ) : args[0];
  };
  
  return {
    
    logEnabled: require("constants").DEBUG,
    
    /*
      ## log()
          
      This object can be false if the logging is deactivated by the clientLog module. 
      So every usage should be checked *(for performance reasons)* with:
          
      ```js
        if( cwtEngine.logEnabled ) cwtEngine.log("log my message");
      ```
        
      @param {...Object} reason A number of arguments that will be used as message.
                                If an argument isn't a String then it will be converted to
                                String by the toString() function.
    */
    log: function(){
      logfn( arrayToMessage.call( arguments ) );
    },
    
    /*
      ## error()
      
      Raises an error in the active Javascript environment.
    
      @param {...Object} reason A number of arguments that will be used as message.
                                If an argument isn't a String then it will be converted to
                                String by the toString() function.
    */
    error: function(){
      var reason;
      
      if( arguments.length === 0 ) reason = "CW:T Debug:: An error was raised";
      else reason = arrayToMessage.call( arguments );
      
      errorfn( reason );
    },
    
    injectLogger: function( logFn, errorFn ){
      logfn = logFn;
      errorfn = errorFn;
    }
  };
});
    
    define("constants",{
  DEBUG:                true,
  
  INACTIVE_ID:          -1,
  ACTIONS_BUFFER_SIZE:  200,
  
  MAX_PLAYER:           5,
  MAX_MAP_WIDTH:        100,
  MAX_MAP_HEIGHT:       100,
  MAX_UNITS_PER_PLAYER: 50,
  MAX_PROPERTIES:       200,
  MAX_SELECTION_RANGE:  15,
  MAX_BUFFER_SIZE:      200,
  
  // #### CW:T Version
  VERSION:              "0.3.2.0 Beta"
});
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </script>
  
</html>