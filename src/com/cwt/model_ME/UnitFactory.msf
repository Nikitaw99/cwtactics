
UnitFactory:
    
    synced units[ Settings.MAX_PLAYER * Settings.MAX_UNITS ] :
        inUse
        owner @Game.players
        hp
        ammo
        fuel
        exp
        type @Data.unitSheets

    function acquireUnit type @Data.unitSheets , player @Game.players : @units
        for unit in units :
            if !unit.inUse :
                resetUnit( unit , player, type )
                return unit

        error("No free unit left")

    function releaseUnit unit @units : 
        assert( unit.inUse )
        unit.inUse = false

    function resetUnit unit @units , owner @Game.players , type @Data.unitSheets :
        unit.inUse = true

    function numOfFreeUnits :
        n = 0
        for unit in units :
            if !unit.inUse : n++
        
        return n