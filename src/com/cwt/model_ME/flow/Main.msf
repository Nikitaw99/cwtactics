#
# Main state
#

for State as IDLE :

    if Input.buttonA() :

        # check unit
        x,y = View.getRealPos()
        tile indexOf Map.tiles =  Map.tileAtPos(x,y)

        if tile.unit != null :
            # show move options
            Cards.moveCard.way.clear()
            Cards.moveCard.movingUnit = tile.unit
            changeStrategy State to "SHOW_MOVE"

        else :
            # open menu
            changeStrategy State to "SHOW_OPTIONS"

    else if Input.buttonB() :

        # check unit
        x,y = View.getRealPos()
        tile indexOf Map.tiles =  Map.tileAtPos(x,y)

        if tile.unit != null :
            # show attack range
            Battle.generateAttackRange( tile.unit )
            changeStrategy State to "SHOW_RANGE"