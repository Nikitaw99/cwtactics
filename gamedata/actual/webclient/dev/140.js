util.scoped(function(){function e(e,t){var n=s[e];t?(n--,constants.INACTIVE_ID>n&&(n=model.listOfCoTypes.length-1)):(n++,n>=model.listOfCoTypes.length&&(n=constants.INACTIVE_ID)),s[e]=n,n!==constants.INACTIVE_ID?model.setMainCo(e,model.listOfCoTypes[n]):model.setMainCo(e,null),r(e)}function t(e){r(e)}function n(e,t){var n=model.players[e];do t?(n.team--,0>n.team&&(n.team=constants.MAX_PLAYER-1)):(n.team++,n.team===constants.MAX_PLAYER&&(n.team=0));while(!model.atLeastTwoTeamsLeft());r(e)}function o(e){model.coData[e].coA=null,s[e]=constants.INACTIVE_ID,r(e)}function r(e){var t=l[e],n=model.players[e];if(n.team===constants.INACTIVE_ID)t[0].innerHTML=model.localized("config.player.off"),t[1].innerHTML="",t[2].innerHTML="";else if(n.team===constants.DESELECT_ID)t[0].innerHTML=model.localized("config.player.disabled"),t[1].innerHTML="",t[2].innerHTML="";else{var o=controller.screenStateMachine.data.isSinglePlayer;0!==e&&o?(t[0].innerHTML=model.localized("config.player.AI"),controller.setAIPlayer(e,"dumbBoy")):(t[0].innerHTML=model.localized("config.player.human"),model.registerClientPlayer(e));var r=model.coData[e].coA;t[1].innerHTML=null!==r?r.ID:model.localized("config.player.co.none"),t[2].innerHTML=n.team}}function i(e){var t=e.value;controller.prepareGameRound(),controller.loadCompactModel(t),o(0),o(1),o(2),o(3)}var a=controller.generateButtonGroup(document.getElementById("cwt_player_setup_screen"),"cwt_panel_header_big cwt_page_button cwt_panel_button","cwt_panel_header_big cwt_page_button cwt_panel_button button_active","cwt_panel_header_big cwt_page_button cwt_panel_button button_inactive"),l=[[document.getElementById("playerConfig_p1_type"),document.getElementById("playerConfig_p1_co"),document.getElementById("playerConfig_p1_team")],[document.getElementById("playerConfig_p2_type"),document.getElementById("playerConfig_p2_co"),document.getElementById("playerConfig_p2_team")],[document.getElementById("playerConfig_p3_type"),document.getElementById("playerConfig_p3_co"),document.getElementById("playerConfig_p3_team")],[document.getElementById("playerConfig_p4_type"),document.getElementById("playerConfig_p4_co"),document.getElementById("playerConfig_p4_team")]],s=[0,0,0,0];controller.screenStateMachine.structure.PLAYER_SETUP=Object.create(controller.stateParent),controller.screenStateMachine.structure.PLAYER_SETUP.section="cwt_player_setup_screen",controller.screenStateMachine.structure.PLAYER_SETUP.enterState=function(){this.data.mapToLoad,controller.storage.get(this.data.mapToLoad,i)},controller.screenStateMachine.structure.PLAYER_SETUP.UP=function(){switch(a.getActiveKey()){case"config.co.next":case"config.co.prev":case"config.team.next":case"config.team.prev":a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex();break;case"config.type.next":var e=a.getActiveData();"1"==e?(a.decreaseIndex(),a.decreaseIndex()):"2"==e?(a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex()):(a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex());break;case"config.type.prev":var e=a.getActiveData();"1"==e?a.decreaseIndex():"2"==e?(a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex()):(a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex(),a.decreaseIndex());break;case"config.next":a.decreaseIndex()}return this.breakTransition()},controller.screenStateMachine.structure.PLAYER_SETUP.DOWN=function(){switch(a.getActiveKey()){case"config.type.next":case"config.co.next":case"config.type.prev":case"config.co.prev":a.increaseIndex(),a.increaseIndex(),a.increaseIndex(),a.increaseIndex();break;case"config.team.next":var e=a.getActiveData();"3"==e?(a.increaseIndex(),a.increaseIndex(),a.increaseIndex()):"4"==e?a.increaseIndex():(a.increaseIndex(),a.increaseIndex(),a.increaseIndex(),a.increaseIndex());break;case"config.team.prev":var e=a.getActiveData();"3"==e?(a.increaseIndex(),a.increaseIndex(),a.increaseIndex(),a.increaseIndex()):"4"==e?(a.increaseIndex(),a.increaseIndex()):(a.increaseIndex(),a.increaseIndex(),a.increaseIndex(),a.increaseIndex());break;case"config.next":a.increaseIndex()}return this.breakTransition()},controller.screenStateMachine.structure.PLAYER_SETUP.LEFT=function(){switch(a.getActiveKey()){case"config.type.prev":case"config.co.prev":case"config.team.prev":var e=a.getActiveData();("2"==e||"4"==e)&&a.decreaseIndex();break;case"config.type.next":case"config.co.next":case"config.team.next":a.decreaseIndex()}return this.breakTransition()},controller.screenStateMachine.structure.PLAYER_SETUP.RIGHT=function(){switch(a.getActiveKey()){case"config.type.next":case"config.co.next":case"config.team.next":var e=a.getActiveData();("1"==e||"3"==e)&&a.increaseIndex();break;case"config.type.prev":case"config.co.prev":case"config.team.prev":a.increaseIndex()}return this.breakTransition()},controller.screenStateMachine.structure.PLAYER_SETUP.CANCEL=function(){return this.data.mapToLoad=null,"VERSUS"},controller.screenStateMachine.structure.PLAYER_SETUP.ACTION=function(){switch(a.getActiveKey()){case"config.type.prev":case"config.type.next":case"config.co.prev":case"config.co.next":case"config.team.prev":case"config.team.next":var o;switch(a.getActiveData()){case"1":o=0;break;case"2":o=1;break;case"3":o=2;break;case"4":o=3}if(model.players[o].team===constants.INACTIVE_ID)break;switch(a.getActiveKey()){case"config.type.prev":t(o,!0);break;case"config.type.next":t(o,!1);break;case"config.team.prev":n(o,!0);break;case"config.team.next":n(o,!1);break;case"config.co.prev":e(o,!0);break;case"config.co.next":e(o,!1)}break;case"config.next":return"GAMEROUND"}return this.breakTransition()}});