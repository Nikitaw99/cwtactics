view.drawScreenChanges=0,view.drawScreen=util.matrix(constants.MAX_MAP_WIDTH,constants.MAX_MAP_HEIGHT,!1),view.markForRedraw=function(e,t){if(e>=0&&t>=0&&model.mapWidth>e&&model.mapHeight>t){if(view.drawScreen[e][t]===!0)return;view.drawScreen[e][t]=!0,view.drawScreenChanges++,t++,model.mapHeight>t&&(null!==model.propertyPosMap[e][t]?view.markForRedraw(e,t):view.overlayImages[view.mapImages[e][t]]===!0&&view.markForRedraw(e,t))}},view.markForRedrawRange=function(e,t,o){var n,r,i=t-o,l=t+o;for(0>i&&(i=0),l>=model.mapHeight&&(l=model.mapHeight-1);l>=i;i++){var a=Math.abs(i-t);for(n=e-o+a,r=e+o-a,0>n&&(n=0),r>=model.mapWidth&&(r=model.mapWidth-1);r>=n;n++)view.markForRedraw(n,i)}},view.markForRedrawWithNeighbours=function(e,t){t>0&&view.markForRedraw(e,t-1),e>0&&view.markForRedraw(e-1,t),view.markForRedraw(e,t),model.mapHeight-1>t&&view.markForRedraw(e,t+1),model.mapWidth-1>e&&view.markForRedraw(e+1,t)},view.markForRedrawWithNeighboursRing=function(e,t){var o=model.mapWidth,n=model.mapHeight;e>0&&(t>0&&view.markForRedraw(e-1,t-1),view.markForRedraw(e-1,t),n-1>t&&view.markForRedraw(e-1,t+1)),t>0&&view.markForRedraw(e,t-1),view.markForRedraw(e,t),n-1>t&&view.markForRedraw(e,t+1),o-1>e&&(t>0&&view.markForRedraw(e+1,t-1),view.markForRedraw(e+1,t),n-1>t&&view.markForRedraw(e+1,t+1))},view.completeRedraw=function(){view.drawScreenChanges=1;for(var e=0,t=model.mapWidth;t>e;e++)for(var o=0,n=model.mapHeight;n>o;o++)view.drawScreen[e][o]=!0},view.markSelectionMapForRedraw=function(e){for(var t=e.selection.centerX,o=e.selection.centerY,n=e.selection.data,r=0;n.length>r;r++)for(var i=n[r],l=0;i.length>l;l++)-1!==i[l]&&view.markForRedraw(t+r,o+l)};