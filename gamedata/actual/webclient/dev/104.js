controller.startLoadingProcess=function(e,t){constants.DEBUG&&util.log("loading game assets"),jWorkflow.order().andThen(function(){e.innerHTML="Loading",t.className="loadBar_0"}).chill(150).andThen(controller.calculateEnvironmentFeatures).andThen(function(){t.className="loadBar_5"}).chill(150).andThen(function(e,t){controller.clientFeatures.supported||(t.take(),confirm("Your system isn't supported by CW:T. Try to run it?")&&t.pass())}).andThen(function(){t.className="loadBar_10"}).chill(150).andThen(controller.loadStorageController).andThen(function(){t.className="loadBar_15"}).chill(150).andThen(function(e,t){return e?e:(t.take(),controller.storage.get("resetDataAtStart",function(e){var o=null!==e&&e.value;o||(o="1"===getQueryParams(document.location.search).wipeoutMod),o?(constants.DEBUG&&util.log("wipe out cached data"),controller.storage.clear(function(){t.pass(!1)})):t.pass(!1)}),void 0)}).andThen(function(){t.className="loadBar_20"}).chill(150).andThen(controller.loadModification).andThen(function(){e.innerHTML=model.localized("loading.loadMaps"),t.className="loadBar_30"}).chill(150).andThen(controller.loadMaps).andThen(function(){e.innerHTML=model.localized("loading.loadImages"),t.className="loadBar_40"}).chill(150).andThen(controller.loadImages).andThen(function(){e.innerHTML=model.localized("loading.cropImages"),t.className="loadBar_60"}).chill(150).andThen(controller.cutImages).andThen(function(){e.innerHTML=model.localized("loading.colorizeImages"),t.className="loadBar_65"}).chill(150).andThen(controller.colorizeImages).andThen(function(){e.innerHTML=model.localized("loading.loadSounds"),t.className="loadBar_70"}).chill(150).andThen(controller.loadSoundFiles).andThen(function(){e.innerHTML=model.localized("loading.prepareInput"),t.className="loadBar_90"}).chill(150).andThen(controller.loadInputDevices).andThen(function(){e.innerHTML=model.localized("loading.prepareLanguage"),t.className="loadBar_95"}).chill(150).andThen(function(){for(var e=document.querySelectorAll("[key]"),t=0,o=e.length;o>t;t++)e[t].innerHTML=model.localized(e[t].attributes.key.value)}).andThen(function(){e.innerHTML=model.localized("loading.done"),t.className="loadBar_100"}).chill(500).andThen(function(){controller.screenStateMachine.event("complete")}).start(function(e){e&&model.criticalError(constants.error.CLIENT_ERROR,constants.error.CLIENT_LOAD_ERROR)})};