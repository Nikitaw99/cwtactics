controller.onEvent("modifyVisionAt",function(e,t,o,n){n=10;var r,i,a=t-n,l=t+n;for(0>a&&(a=0),l>=model.mapHeight&&(l=model.mapHeight-1);l>=a;a++){var s=Math.abs(a-t);for(r=e-n+s,i=e+n-s,0>r&&(r=0),i>=model.mapWidth&&(i=model.mapWidth-1);i>=r;r++){view.markForRedraw(r,a);var c=model.unitPosMap[r][a];null!==c&&c.hidden&&controller.updateUnitStatus(model.extractUnitId(c))}}}),controller.onEvent("recalculateFogMap",function(){view.completeRedraw()});