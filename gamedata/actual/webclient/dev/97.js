controller.screenElement=document.getElementById("cwt_canvas"),controller.screenX=0,controller.screenY=0,controller.screenWidth=-1,controller.screenHeight=-1,controller.screenScale=1,controller.moveScreenX=0,controller.moveScreenY=0,controller.setScreenScale=function(e){if(!(-1>e||e>3)){controller.screenScale=e,controller.screenElement.className="scale"+e,0===e?e=.8:-1===e&&(e=.7);var t=TILE_LENGTH*e;controller.screenWidth=parseInt(window.innerWidth/t,10),controller.screenHeight=parseInt(window.innerHeight/t,10),controller.setScreenPosition(controller.screenX,controller.screenY,!1)}},controller.getCanvasPosX=function(e){return e*TILE_LENGTH*controller.screenScale},controller.getCanvasPosY=function(e){return e*TILE_LENGTH*controller.screenScale},controller.setScreenPosition=function(e,t){controller.screenX=e,controller.screenY=t;var o=controller.screenElement.style,n=controller.screenScale,r=-(controller.screenX*TILE_LENGTH*n),i=-(controller.screenY*TILE_LENGTH*n);switch(n){case 2:r+=controller.screenElement.width/2,i+=controller.screenElement.height/2;break;case 3:r+=controller.screenElement.width,i+=controller.screenElement.height}o.position="absolute",o.left=r+"px",o.top=i+"px"},controller.shiftScreenPosition=function(e,t){1===arguments.length&&(t=1);var o=controller.screenX,n=controller.screenY;switch(e){case model.moveCodes.DOWN:n+=t;break;case model.moveCodes.RIGHT:o+=t;break;case model.moveCodes.UP:n-=t;break;case model.moveCodes.LEFT:o-=t}0>o&&(o=0),0>n&&(n=0),o>=model.mapWidth&&(o=model.mapWidth-1),n>=model.mapHeight&&(n=model.mapHeight-1),controller.setScreenPosition(o,n,!1)},view.resizeCanvas=function(){var e=controller.screenElement;e.width=TILE_LENGTH*model.mapWidth,e.height=TILE_LENGTH*model.mapHeight,controller.screenWidth=parseInt(window.innerWidth/TILE_LENGTH,10),controller.screenHeight=parseInt(window.innerHeight/TILE_LENGTH,10)};