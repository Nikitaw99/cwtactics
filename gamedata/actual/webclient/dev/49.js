controller.unitAction({key:"attack",unitAction:!0,targetSelectionType:"A",relation:["S","T",model.relationModes.NONE,model.relationModes.SAME_OBJECT],prepareTargets:function(e){model.attackRangeMod_(e.source.unitId,e.target.x,e.target.y,e.selection)},condition:function(e){return model.isPeacePhaseActive()?!1:model.isIndirectUnit(e.source.unitId)&&e.movePath.data.getSize()>0?!1:model.hasTargets(e.source.unitId,e.target.x,e.target.y)},invoke:function(e){controller.sharedInvokement("battleBetween",[e.source.unitId,e.targetselection.unitId,Math.round(100*Math.random()),Math.round(100*Math.random())])}});