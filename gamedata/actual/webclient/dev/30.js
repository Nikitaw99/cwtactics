controller.registerInvokableCommand("transferMoney"),controller.registerInvokableCommand("transferUnit"),controller.registerInvokableCommand("transferProperty"),controller.defineEvent("transferMoney"),controller.defineEvent("transferUnit"),controller.defineEvent("transferProperty"),model.MONEY_TRANSFER_STEPS=[1e3,2500,5e3,1e4,25e3,5e4],model.canTransferMoneyToTile=function(e,t,r){var n;return model.players[e].gold<model.MONEY_TRANSFER_STEPS[0]?!1:(n=model.unitPosMap[t][r],null===n||n.owner===e?(n=model.propertyPosMap[t][r],null!==n&&n.owner!==e&&-1!==n.owner?!0:!1):!0)},model.addGoldTransferEntries=function(e){for(var t=model.players[e].gold,r=0,n=model.MONEY_TRANSFER_STEPS.length;n>r;r++)t>=model.MONEY_TRANSFER_STEPS[r]&&data.menu.addEntry(model.MONEY_TRANSFER_STEPS[r])},model.transferMoney=function(e,t,r){model.isValidPlayerId(e)&&model.isValidPlayerId(t)||model.criticalError(constants.error.ILLEGAL_PARAMETERS,constants.error.UNKNOWN_PLAYER_ID);var n=model.players[e],o=model.players[t];r>n.gold&&model.criticalError(constants.error.ILLEGAL_PARAMETERS,constants.error.NOT_ENOUGH_MONEY),n.gold-=r,o.gold+=r,controller.events.transferMoney(e,t,r)},model.transferMoneyByTile=function(e,t,r,n){var o=null!==model.propertyPosMap[t][r]?model.propertyPosMap[t][r].owner:model.unitPosMap[t][r].owner;model.transferMoney(e,o,n)},model.transferUnit=function(e,t){var r=model.units[e],n=r.x,o=r.y,i=r.owner;r.owner=constants.INACTIVE_ID,model.players[t].team!==model.players[i].team&&model.modifyVisionAt(n,o,r.type.vision,-1),model.clearUnitPosition(e),model.createUnit(t,n,o,r.type.ID);var a=model.unitPosMap[n][o];a.hp=r.hp,a.ammo=r.ammo,a.fuel=r.fuel,a.exp=r.exp,a.type=r.type,a.x=n,a.y=o,a.loadedIn=r.loadedIn,controller.events.transferUnit(e,t)},model.isUnitTransferable=function(e){return model.hasLoadedIds(e)?!1:!0},model.addTransferTargets=function(e,t){for(var r=0,n=constants.MAX_PLAYER;n>r;r++)r!==e&&model.players[r].team!==constants.INACTIVE_ID&&t.addEntry(r,!0)},model.transferProperty=function(e,t){var r=model.properties[e];r.owner=t;var n,o,i=model.mapWidth,a=model.mapHeight;for(n=0;i>n;n++)for(o=0;a>o;o++)model.propertyPosMap[n][o]===r;controller.events.transferProperty(e,t)},model.isPropertyTransferable=function(e){return!model.properties[e].type.notTransferable};