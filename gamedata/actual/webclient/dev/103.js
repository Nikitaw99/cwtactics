controller.cutImages=util.singleLazyCall(function(e,t){function o(e,t,o){var n=t?-1:1,r=o?-1:1,i=t?-1*e.width:0,l=o?-1*e.height:0,a=document.createElement("canvas");a.height=e.height,a.width=e.width;var s=a.getContext("2d");return s.save(),s.scale(n,r),s.drawImage(e,i,l,e.width,e.height),s.restore(),a}if(e)return constants.DEBUG&&util.log("break at cutting images due error from previous inits"),t.pass(!0);constants.DEBUG&&util.log("cutting images"),t.take();try{var n=model.graphics;n.baseSize,constants.DEBUG&&util.log("cutting unit commands into single types");for(var r=n.units,i=0,l=r.length;l>i;i++){var a,s,c=view.COLOR_RED,d=r[i][0],u=view.getUnitImageForType(d,view.IMAGE_CODE_IDLE,c);a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,0,0,96,32,0,0,96,32),view.setUnitImageForType(a,d,view.IMAGE_CODE_IDLE,c),a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,0,0,96,32,0,0,96,32),view.setUnitImageForType(o(a,!0,!1),d,view.IMAGE_CODE_IDLE_INVERTED,c),a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,288,0,96,32,0,0,96,32),view.setUnitImageForType(a,d,view.IMAGE_CODE_LEFT,c),a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,288,0,96,32,0,0,96,32),view.setUnitImageForType(o(a,!0,!1),d,view.IMAGE_CODE_RIGHT,c),a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,96,0,96,32,0,0,96,32),view.setUnitImageForType(a,d,view.IMAGE_CODE_UP,c),a=document.createElement("canvas"),a.height=32,a.width=96,s=a.getContext("2d"),s.drawImage(u,192,0,96,32,0,0,96,32),view.setUnitImageForType(a,d,view.IMAGE_CODE_DOWN,c)}constants.DEBUG&&util.log("cutting unit commands into single types done"),constants.DEBUG&&util.log("cutting misc into single types");for(var m=n.misc,i=0,l=m.length;l>i;i++){var p=m[i];if(p.length>2){var u=view.getInfoImageForType(p[0]);a=document.createElement("canvas"),s=a.getContext("2d"),p.length>6?p[6]===!0?(a.height=32,a.width=96,a=o(a,!0,!1),s=a.getContext("2d")):(a.height=16,a.width=16,s.save(),s.translate(8,8),s.rotate(p[6]*Math.PI/180),s.translate(-8,-8)):(a.height=16,a.width=16),p.length>6&&p[6]===!0?s.drawImage(u,p[2],p[3],p[4],p[5],0,0,96,32):s.drawImage(u,p[2],p[3],p[4],p[5],0,0,16,16),p.length>6&&s.restore(),view.setInfoImageForType(a,p[0])}}constants.DEBUG&&util.log("cutting misc into single types done"),t.pass(!1)}catch(l){controller.loadFault(l,t)}});