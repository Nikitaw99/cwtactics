util.scoped(function(){function e(){if(4==this.readyState)if(4==this.readyState&&200==this.status)if(util.log("grabbed file successfully"),this.asJSON){var e;try{e=JSON.parse(this.responseText)}catch(t){this.failCallback(t)}this.winCallback(e)}else this.winCallback(this.responseText);else util.log("could not grab file"),this.failCallback(this.statusText)}var t;try{new XMLHttpRequest,t=!0}catch(o){t=!1}util.grabRemoteFile=function(o){var n;util.log("try to grab file",o.path),n=t?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.asJSON=o.json,n.winCallback=o.success,n.failCallback=o.error,n.onreadystatechange=e,n.open("get",o.path,!0),n.send()}});